<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:kiwi="http://www.kiwi-project.eu/jsf"
      template="sn/template.xhtml"
      >

    <ui:define name="header">
       
       <!-- load stylesheets -->
	   	<link href="stylesheet/basic.css" rel="stylesheet" type="text/css" />
	    <link href="stylesheet/point.css" rel="stylesheet" type="text/css" />
	    <link href="stylesheet/newsItem.css" rel="stylesheet" type="text/css" />
	    <link href="stylesheet/route.css" rel="stylesheet" type="text/css" />
	    <link href="stylesheet/search.css" rel="stylesheet" type="text/css" />
	    <link href="stylesheet/sn.css" rel="stylesheet" type="text/css" />
	    <link href="stylesheet/tagcloud.css" rel="stylesheet" type="text/css" />
	    <link href="stylesheet/location.css" rel="stylesheet" type="text/css" />
	    <link href="stylesheet/person.css" rel="stylesheet" type="text/css" />
	    
	    <link href="js/extension/jQuery/rte/rte.css" rel="stylesheet" type="text/css" />
	    <link href="js/extension/GMap2/tooltip/tooltip.css" rel="stylesheet" type="text/css" />
		<link href="js/extension/GMap2/cluster2/cluster.css" rel="stylesheet" type="text/css" />
	
        <link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/js/jqueryplugins/jquery-lightbox-0.5/css/jquery.lightbox-0.5.css" media="screen" />
	    
	    <script
			src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=#{tagit2.explorerAction.gmapkey}"
			type="text/javascript">
		</script>
	
		<!-- load jQuery lib and extensions -->
		<script type="text/javascript" src="js/lib/jQuery/jquery-1.3.2.js"></script>
		<script type="text/javascript" src="js/lib/jQuery/jquery-ui-1.7.2.min.js"></script>
		<script type="text/javascript" src="js/lib/jQuery/jquery.tools.min.js"></script>
		
		<script src="#{facesContext.externalContext.requestContextPath}/widgets/recommendations/widget.tagitRecommendations.js" type="text/javascript"></script>
		
		<script type="text/javascript" src="js/extension/jQuery/rte/jquery.rte.js"></script>
		<script type="text/javascript" src="js/extension/GMap2/tooltip/gmap.sn_tooltip-0.1.js"></script>

	   <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jqueryplugins/jquery-lightbox-0.5/js/jquery.lightbox-0.5.pack.js"></script>

		<!-- load specific script library -->
	    <ui:insert name="script"/>
    
        <script type="text/javascript">

		//global var
		var conversationId;
		var externalContextPath;

		var loggedIn;
        
        //no conflict mode
        jQuery.noConflict();
        
        //start initialisation
        jQuery("document").ready(function(){
			// set JBoss Seam conversation for WebRemote calls
            conversationId = #{conversation.id};
            //set context path
            externalContextPath = "#{facesContext.externalContext.requestContextPath}";
            //test if logged in
            loggedIn = #{identity.loggedIn};
            //inititlize map
            initialize();
        });


        </script>

        <f:view contentType="text/html">
            	<s:div id="mapPanel"></s:div>
        </f:view>

    </ui:define>

    
    <ui:define name="content">
    	<ui:insert name="search"></ui:insert>
    	<ui:insert name="point"></ui:insert>
    	<div id="back" />
    </ui:define>
    
</ui:composition>	

