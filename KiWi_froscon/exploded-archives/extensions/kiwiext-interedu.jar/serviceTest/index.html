 <!DOCTYPE html>
 <html lang="en">
 <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <script src="jquery-1.3.2.js" type="text/javascript"></script>
   <script type="text/javascript">

   	 //basic url for webservices
 	 var url = "http://localhost:8080/KiWi/seam/resource/services/thesaurus/";

 	 //get all SKOS TopConcepts and list them
     $(document).ready(function(){
    	$("#rdfCode").html("<em>Click on a concept to show RDF data</em>");
		$.getJSON( url+"top/json?callback=?", function(data){
	 	 	$("#treeTitle").text(data.title);
	 		$.each(data.concepts, function(i,item){
	 	 	 	var s = "<li><a href='#' onclick='click("+item.id+");'>" + item.title + "</a></li><ul id='subOf_"+item.id+"'></ul>";
	 	 		$("#rootList").append(s);
	 	 	});
		});
     });

 	 //a SKOS Concept is clicked
 	function click(id) {
 		$("#rdfCode").html("<em>Loading ...</em>");
 	 	//display subConcepts
		setTree(id);
		//display RDF
 	 	$.get(url + "html/" + id, function(data){
 	 		$("#rdfCode").text(data);
 	 	});

 	}

 	function setTree(id) {
 		$.getJSON( url+"sub/json/"+id+"?callback=?", function(data){
 	 		if ($("#subOf_"+id).html() == "") {
 				$.each(data.concepts, function(i,item){
 					var s = "<li><a href='#' onclick='click("+item.id+");'>" + item.title + "</a></li><ul id='subOf_"+item.id+"'></ul>";
 					$("#subOf_" + id).append(s);
 				});
 	 		} else {
 	 			$("#subOf_"+id).empty();
 	 	 	}
 	 	});
 	 }

     
   </script>
 </head>
 <body>
 	<div id="Tree" style="width:45%;border: 1px solid blue;margin:2%;float:left;padding:5px;">
 		<h2 id="treeTitle"></h2>
   		<ul id="rootList"></ul>
   	</div>
   	<div id="rdf" style="width:45%;border: 1px solid blue;margin:2%;float:right;padding:5px;">
   		<div id="edit" style="margin:5px;padding:5px;border: 1px solid blue">
   			<h2>maybe some edit functions</h2>
   		</div>
   		<div id="data" style="margin:5px;padding:5px;border: 1px solid blue">
   		<h2>RDF for selected concept</h2>
   		<p id="rdfCode"></p>
   		</div>
   	</div>
 </body>
 </html>


